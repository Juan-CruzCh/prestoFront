<!-- Botón para abrir modal -->
<button class="bg-blue-600 text-white px-4 py-2 rounded" (click)="abrirModal()">
  Crear
</button>

@if (isOpen) {
<div class="fixed inset-0 flex items-center justify-center z-50  bg-opacity-40">
  <div class="bg-white rounded-lg shadow-lg w-full max-w-3xl p-6">

    <!-- Header -->
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold">Crear Cliente</h2>
      <button (click)="cerrarModal()" class="text-xl">✕</button>
    </div>

    <form (submit)="guardarUsuario($event)" class="space-y-6">

      <!-- GRID DOS COLUMNAS -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">

        <!-- CI -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            CI
          </label>
          <input type="text" [field]="form.ci"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.ci().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Nombre -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Nombre
          </label>
          <input type="text" [field]="form.nombre"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.nombre().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Apellido Paterno -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Apellido Paterno
          </label>
          <input type="text" [field]="form.apellidoPaterno"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.apellidoPaterno().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Apellido Materno -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Apellido Materno
          </label>
          <input type="text" [field]="form.apellidoMaterno"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.apellidoMaterno().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Celular -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Celular
          </label>
          <input type="text" [field]="form.celular"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.celular().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Usuario -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Usuario
          </label>
          <input type="text" [field]="form.usuario"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.usuario().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Contraseña -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Contraseña
          </label>
          <input type="password" [field]="form.password"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.password().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Rol -->
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Rol
          </label>
          <select [field]="form.rol"
            class="w-full px-3 py-2 border border-gray-300 rounded-md">
            <option value="">Seleccione un rol</option>
            <option value="ADMINISTRADOR">ADMINISTRADOR</option>
            <option value="LECTURADOR">LECTURADOR</option>
          </select>
          @if (this.form().touched()) {
            @for (e of form.rol().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

        <!-- Dirección -->
        <div class="md:col-span-2">
          <label class="block text-sm font-medium text-gray-700 mb-1">
            Dirección
          </label>
          <input type="text" [field]="form.direccion"
            class="w-full border rounded px-3 py-2" />
          @if (this.form().touched()) {
            @for (e of form.direccion().errors(); track $index) {
              <p class="text-red-500 text-sm mt-1">{{ e.message }}</p>
            }
          }
        </div>

      </div>

      <!-- BOTÓN -->
      <div class="flex justify-end">
        <button type="submit"
          class="px-6 py-2 bg-blue-600 text-white rounded disabled:opacity-50">
          Guardar
        </button>
      </div>

    </form>
  </div>
</div>
}
