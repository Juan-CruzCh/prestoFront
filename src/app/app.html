<div class="relative h-screen bg-gray-100">
  <!-- SIDEBAR OVERLAY -->
  <div
    *ngIf="drawerOpen"
    class="fixed top-16 left-0 w-full h-[calc(100%-64px)]"
    (click)="toggleDrawer()"
  ></div>

  <!-- SIDEBAR -->
  <aside
    [class.translate-x-0]="drawerOpen"
    [class.-translate-x-full]="!drawerOpen"
    class="fixed top-16 left-0 w-64 h-[calc(100%-64px)] bg-white shadow-md flex flex-col transition-transform duration-300 z-50"
  >
    <!-- Usuario -->
    <div class="flex items-center p-4 border-b">
      <div class="w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center">
        <span class="text-gray-700 text-xl">üë§</span>
      </div>
      <div class="ml-3">
        <div class="font-semibold text-gray-800">{{ usuario.nombre }}</div>
        <div class="text-sm text-gray-500">{{ usuario.rol }}</div>
      </div>
    </div>

    <!-- Men√∫ -->
    <nav class="flex-1 overflow-y-auto">
      <!-- Dashboard -->
      <a routerLink="/dashboard" class="flex items-center p-3 hover:bg-gray-100">
        <span class="material-icons">dashboard</span>
        <span class="ml-2">Dashboard</span>
      </a>

      <!-- Medidor -->
      <div>
        <button
          (click)="toggleSubmenu('medidor')"
          class="flex items-center p-3 w-full hover:bg-gray-100"
        >
          <span class="material-icons">speed</span>
          <span class="ml-2">Medidor</span>
          <span class="ml-auto material-icons">
            {{ expandedMenus['medidor'] ? 'expand_less' : 'expand_more' }}
          </span>
        </button>
        @if(expandedMenus['medidor']) {
        <div class="ml-6 flex flex-col">
          <a routerLink="/crea/medidor" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">add</span>
            <span class="ml-2 text-sm">Crear</span>
          </a>
          <a routerLink="/listar/medidor" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Listar</span>
          </a>
          <a routerLink="/listar/medidores/morosos" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Morosos</span>
          </a>
        </div>
        }
      </div>

      <!-- Lecturas -->
      <div>
        <button
          (click)="toggleSubmenu('lecturas')"
          class="flex items-center p-3 w-full hover:bg-gray-100"
        >
          <span class="material-icons">book</span>
          <span class="ml-2">Lecturas</span>
          <span class="ml-auto material-icons">
            {{ expandedMenus['lecturas'] ? 'expand_less' : 'expand_more' }}
          </span>
        </button>
        @if(expandedMenus['lecturas']) {
        <div class="ml-6 flex flex-col">
          <a routerLink="/crear/lectura" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">add</span>
            <span class="ml-2 text-sm">Crear</span>
          </a>
          <a routerLink="/listar/lectura" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Listar</span>
          </a>
        </div>
        }
      </div>

      <!-- Tarifas -->
      <div>
        <button
          (click)="toggleSubmenu('tarifa')"
          class="flex items-center p-3 w-full hover:bg-gray-100"
        >
          <span class="material-icons">credit_card</span>
          <span class="ml-2">Tarifa</span>
          <span class="ml-auto material-icons">
            {{ expandedMenus['tarifa'] ? 'expand_less' : 'expand_more' }}
          </span>
        </button>
        <div *ngIf="expandedMenus['tarifa']" class="ml-6 flex flex-col">
          <a routerLink="/listar/tarifas" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Listar tarifas</span>
          </a>
        </div>
      </div>

      <!-- Gastos -->
      <div>
        <button
          (click)="toggleSubmenu('gastos')"
          class="flex items-center p-3 w-full hover:bg-gray-100"
        >
          <span class="material-icons">account_balance_wallet</span>
          <span class="ml-2">Gastos</span>
          <span class="ml-auto material-icons">
            {{ expandedMenus['gastos'] ? 'expand_less' : 'expand_more' }}
          </span>
        </button>
        @if(expandedMenus['gastos']) {
        <div class="ml-6 flex flex-col">
          <a routerLink="/gastos/crear" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">add</span>
            <span class="ml-2 text-sm">Registrar</span>
          </a>
          <a routerLink="/gastos/listar" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Listar</span>
          </a>
          <a routerLink="/gastos/categorias" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">settings</span>
            <span class="ml-2 text-sm">Categor√≠as</span>
          </a>
        </div>
        }
      </div>

      <!-- Pagos -->
      <div>
        <button
          (click)="toggleSubmenu('pagos')"
          class="flex items-center p-3 w-full hover:bg-gray-100"
        >
          <span class="material-icons">credit_card</span>
          <span class="ml-2">Pagos</span>
          <span class="ml-auto material-icons">
            {{ expandedMenus['pagos'] ? 'expand_less' : 'expand_more' }}
          </span>
        </button>
        @if(expandedMenus['pagos']) {
        <div class="ml-6 flex flex-col">
          <a routerLink="/pago/realizar" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">add</span>
            <span class="ml-2 text-sm">Realizar pago</span>
          </a>
          <a routerLink="/pago/listar" class="flex items-center p-2 hover:bg-gray-100">
            <span class="material-icons text-sm">list</span>
            <span class="ml-2 text-sm">Listar pagos</span>
          </a>
        </div>
        }
      </div>

      <!-- Usuarios -->
      <a routerLink="/usuarios" class="flex items-center p-3 hover:bg-gray-100">
        <span class="material-icons">group</span>
        <span class="ml-2">Usuarios</span>
      </a>

      <!-- Configuraci√≥n -->
      <a routerLink="/configuracion" class="flex items-center p-3 hover:bg-gray-100">
        <span class="material-icons">settings</span>
        <span class="ml-2">Configuraci√≥n</span>
      </a>

      <!-- Logout -->
      <a routerLink="/logout" class="flex items-center p-3 hover:bg-gray-100 mt-auto">
        <span class="material-icons">logout</span>
        <span class="ml-2">Cerrar sesi√≥n</span>
      </a>
    </nav>
  </aside>

  <!-- MAIN CONTENT -->
  <div class="flex-1 flex flex-col h-full">
    <!-- TOPBAR -->
    <header class="flex items-center bg-blue-600 text-white p-4 shadow z-10 relative">
      <button (click)="toggleDrawer()" class="material-icons mr-4">menu</button>
      <h1 class="text-lg font-semibold">Sistema de Agua</h1>
    </header>

    <!-- CONTENIDO -->
    <main class="flex-1 overflow-auto p-4 relative z-0">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
